<!DOCTYPE html>
<html>
<head>
    <title>Station Codes</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
</head>
<body>
<p id="demo"></p>
<script type="text/javascript">
    $(function() {
		var allLines = {
			"RD": "Red",
			"GR": "Green",
			"YL": "Yellow",
			"BL": "Blue",
			"OR": "Orange",
			"SV": "Silver"
		};	
	
		var displayObj = document.getElementById("demo");
      
		function printStation(lineColor){
			var params = {
				"api_key": "c872618b10584b00a0f0e2176b19a9d1",
				//"StationCodes": "All"
				// Request parameters
				"LineCode": lineColor,
			};
			$.ajax({
				//url: "https://api.wmata.com/StationPrediction.svc/json/GetPrediction/All?" + $.param(params),
				url: "https://api.wmata.com/Rail.svc/json/jStations?" + $.param(params),
				type: "GET",
			})
			.done(function(data) {
				displayObj.innerHTML = displayObj.innerHTML + "<br><b>" +  allLines[lineColor] + " Line</b><br>";
				for (var station = 0, len = data.Stations.length; station < len; station++) {
				  var currStation = data.Stations[station];
				  displayObj.innerHTML = displayObj.innerHTML + currStation.Code + ": " + currStation.Name + "{" + currStation.LineCode1;
				  if (currStation.LineCode2 != null) {
					displayObj.innerHTML = displayObj.innerHTML + "," + currStation.LineCode2;
				  }
				  if (currStation.LineCode3 != null) {
					displayObj.innerHTML = displayObj.innerHTML + "," + currStation.LineCode3;
				  }
				  if (currStation.LineCode4 != null) {
					displayObj.innerHTML = displayObj.innerHTML + "," + currStation.LineCode4;
				  }
				  displayObj.innerHTML = displayObj.innerHTML + "}<br>";
				}
			})
			.fail(function(xhr, status, error) {
				var err = eval("(" + xhr.responseText + ")");
				displayObj.innerHTML = "error: " + err.Message;
			});
		}
		
		for (var color in allLines) {
			printStation(color);
		}
    });
</script>
</body>
</html>